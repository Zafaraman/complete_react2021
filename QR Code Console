using System;
using System.Drawing;
using System.Windows.Forms;
using ZXing;  // Add this
using ZXing.Common;  // Add this
using ZXing.QrCode;  // Add this
using ZXing.QrCode.Internal;  // Add this
using ZXing.Rendering;  // Add this

namespace WIP_Sticker
{
    partial class Form5
    {
        // ... keep existing component declarations ...

        private void GenerateQRCode()
        {
            try
            {
                // Create the QR code content from form data
                string qrContent = $"Customer: {lblCustName.Text}\n" +
                                 $"Product: {label3.Text}\n" +
                                 $"Batch: {label5.Text}\n" +
                                 $"Thickness: {label8.Text}\n" +
                                 $"Width: {label13.Text}\n" +
                                 $"Weight: {label11.Text}\n" +
                                 $"Date/Shift: {label17.Text}";

                BarcodeWriter<Bitmap> writer = new BarcodeWriter<Bitmap>
                {
                    Format = BarcodeFormat.QR_CODE,
                    Options = new QrCodeEncodingOptions
                    {
                        Height = 115,
                        Width = 141,
                        Margin = 1,
                        CharacterSet = "UTF-8",
                        ErrorCorrection = ErrorCorrectionLevel.H
                    },
                    Renderer = new BitmapRenderer()
                };

                using (var qrCode = writer.Write(qrContent))
                {
                    pictureBox1.Image = new Bitmap(qrCode);
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show($"Error generating QR code: {ex.Message}", "Error",
                    MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }

        // ... keep rest of your existing code ...
    }
}