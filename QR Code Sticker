using System;
using System.Drawing;
using System.Drawing.Printing;
using System.Windows.Forms;

public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void btnPrint_Click(object sender, EventArgs e)
    {
        PrintDocument printDoc = new PrintDocument();
        printDoc.PrintPage += new PrintPageEventHandler(PrintDoc_PrintPage);

        PrintDialog printDialog = new PrintDialog
        {
            Document = printDoc
        };

        if (printDialog.ShowDialog() == DialogResult.OK)
        {
            printDoc.Print();
        }
    }

    private void PrintDoc_PrintPage(object sender, PrintPageEventArgs e)
    {
        // Get the dimensions of the printable area
        float pageWidth = e.PageBounds.Width;
        float pageHeight = e.PageBounds.Height;

        // Print page dimensions
        string dimensionsText = $"Page Dimensions: {pageWidth} x {pageHeight}";
        Font font = new Font("Arial", 12);
        float textX = 10; // X position of the text
        float textY = 10; // Y position of the text

        e.Graphics.DrawString(dimensionsText, font, Brushes.Black, textX, textY);

        // Capture the form as an image
        Bitmap bmp = new Bitmap(this.Width, this.Height);
        this.DrawToBitmap(bmp, new Rectangle(0, 0, this.Width, this.Height));

        // Print the captured form image
        float imageX = 10;
        float imageY = textY + font.GetHeight() + 10; // Below the dimensions text
        e.Graphics.DrawImage(bmp, imageX, imageY);
    }
}
