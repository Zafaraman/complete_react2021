using System;
using System.Drawing;
using System.Windows.Forms;
using ZXing;
using ZXing.QrCode;
using ZXing.Windows.Compatibility;

namespace WIP_Sticker
{
    partial class Form5
    {
        private System.ComponentModel.IContainer components = null;

        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        private void InitializeComponent()
        {
            // Keep your existing InitializeComponent code here
            // Just modify pictureBox1 to hold the QR code
            pictureBox1 = new PictureBox
            {
                Location = new Point(337, 4),
                Name = "pictureBox1",
                Size = new Size(141, 115),
                SizeMode = PictureBoxSizeMode.StretchImage,
                TabIndex = 0,
                TabStop = false
            };

            // Add load event handler
            this.Load += Form5_Load;
        }

        private void Form5_Load(object sender, EventArgs e)
        {
            GenerateQRCode();
        }

        private void GenerateQRCode()
        {
            try
            {
                // Create the QR code content from form data
                string qrContent = $"Customer: {lblCustName.Text}\n" +
                                 $"Product: {label3.Text}\n" +
                                 $"Batch: {label5.Text}\n" +
                                 $"Thickness: {label8.Text}\n" +
                                 $"Width: {label13.Text}\n" +
                                 $"Weight: {label11.Text}\n" +
                                 $"Date/Shift: {label17.Text}";

                var writer = new BarcodeWriter
                {
                    Format = BarcodeFormat.QR_CODE,
                    Options = new QrCodeEncodingOptions
                    {
                        Height = 115,
                        Width = 141,
                        Margin = 1
                    }
                };

                using (var qrCode = writer.Write(qrContent))
                {
                    pictureBox1.Image = new Bitmap(qrCode);
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show($"Error generating QR code: {ex.Message}", "Error",
                    MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }

        // Your existing control declarations
        private Label lblHeading;
        private Label lblCustName;
        private TableLayoutPanel tableLayoutPanel1;
        private Label label3;
        private Label label1;
        private Label label2;
        private TableLayoutPanel tableLayoutPanel2;
        private Label label4;
        private Label label5;
        private Label label6;
        private Label label7;
        private Label label8;
        private Label label9;
        private Label label10;
        private Label label12;
        private Label label13;
        private Label label14;
        private Label label15;
        private Label label11;
        private Label label17;
        private TableLayoutPanel tableLayoutPanel3;
        private PictureBox pictureBox1;
        private PictureBox pictureBox2;
        private TableLayoutPanel tableLayoutPanel4;
        private TableLayoutPanel tableLayoutPanel5;
        private Label label16;
        private Label label18;
        private Label label19;
    }
}